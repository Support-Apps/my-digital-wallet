<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×”××¨× ×§ ×©×œ×™ ğŸ’°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --pink: #FFD6E0;
            --pink-dark: #FFB6C8;
            --mint: #B8E8D0;
            --mint-dark: #8DD4B8;
            --gold: #D4AF37;
            --gold-light: #F0D060;
            --white: #FFFAF5;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Arial, sans-serif;
            background: var(--pink);
            min-height: 100vh;
            padding: 20px;
        }
        
        .bsd {
            text-align: left;
            font-size: 16px;
            color: var(--gold);
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .header-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .current-date {
            font-size: 14px;
            color: #666;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            position: relative;
        }
        
        h1 {
            text-align: center;
            color: var(--gold);
            font-size: 42px;
            margin-bottom: 25px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .wallet {
            background: var(--white);
            border-radius: 25px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(212, 175, 55, 0.3);
            border: 3px solid var(--gold);
            margin-bottom: 30px;
        }
        
        .balances-row {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            justify-content: center;
        }
        
        .balance-box {
            flex: 1;
            min-width: 100px;
            height: 100px;
            text-align: center;
            padding: 12px 8px;
            border-radius: 20px;
            border: 2px solid var(--gold);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        
        .balance-box.wallet-balance {
            background: var(--pink);
        }
        
        .balance-box.savings-balance {
            background: var(--mint);
        }
        
        .balance-box.bank-balance {
            background: #e0e0e0;
        }
        
        .balance-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
        }
        
        .balance-amount {
            font-size: 24px;
            font-weight: bold;
            color: var(--gold);
        }
        
        .wallet-contents {
            background: var(--mint);
            border-radius: 15px;
            padding: 20px;
            min-height: 100px;
            border: 2px dashed var(--mint-dark);
            margin-bottom: 20px;
        }
        
        .wallet-contents-title {
            text-align: center;
            color: #555;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .money-in-wallet {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            align-items: center;
        }
        
        .money-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }
        
        .money-count {
            font-size: 14px;
            font-weight: bold;
            color: #555;
            background: white;
            padding: 2px 10px;
            border-radius: 10px;
        }
        
        .money-time {
            font-size: 11px;
            color: #888;
            direction: ltr;
        }
        
        .empty-wallet {
            text-align: center;
            color: #888;
            font-style: italic;
            padding: 30px;
        }
        
        .deposit-section {
            background: var(--white);
            border-radius: 20px;
            padding: 25px;
            border: 2px solid var(--pink-dark);
        }
        
        .section-title {
            text-align: center;
            color: var(--gold);
            font-size: 24px;
            margin-bottom: 20px;
        }
        
        .subsection-title {
            text-align: center;
            font-size: 18px;
            color: #666;
            margin: 15px 0 10px 0;
        }
        
        .money-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            justify-content: center;
        }
        
        .money-btn {
            padding: 12px 20px;
            font-size: 16px;
            font-weight: bold;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .money-btn:hover {
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .money-btn:active {
            opacity: 0.8;
        }
        
        .coin-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            padding: 0;
            justify-content: center;
            background: radial-gradient(circle at 30% 30%, #f0f0f0, #a0a0a0);
            color: #404040;
            border: 3px solid #808080;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.3), inset -2px -2px 5px rgba(0,0,0,0.1);
        }
        
        .coin-btn.gold {
            width: 60px;
            height: 60px;
            background: radial-gradient(circle at 50% 50%, #ffe070 0%, #c09020 55%, #a0a0a0 56%, #c0c0c0 80%, #909090 100%);
            color: #5a4010;
            border: 3px solid #808080;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.3), inset -2px -2px 5px rgba(0,0,0,0.1);
        }
        .bill-btn-20 { background: #c03030; color: white; border: 2px solid #a02020; }
        .bill-btn-50 { background: #308050; color: white; border: 2px solid #206040; }
        .bill-btn-100 { background: #c07020; color: white; border: 2px solid #a05010; }
        .bill-btn-200 { background: #3060a0; color: white; border: 2px solid #204080; }
        
        .actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 25px;
            flex-wrap: wrap;
        }
        
        .action-btn {
            padding: 15px 30px;
            font-size: 16px;
            font-weight: bold;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        }
        
        .bank-btn { background: linear-gradient(135deg, var(--gold-light), var(--gold)); color: #5a4010; border: 2px solid var(--gold); }
        .savings-btn { background: var(--mint); color: #2d5a40; border: 2px solid var(--mint-dark); }
        .reset-btn { background: var(--pink); color: #8b4050; border: 2px solid var(--pink-dark); }
        
        .history-section {
            background: var(--white);
            border-radius: 20px;
            padding: 25px;
            border: 3px solid var(--gold);
            max-height: 300px;
            overflow-y: auto;
        }
        
        .history-item {
            padding: 12px 15px;
            border-radius: 10px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .history-deposit { background: #e8f8e8; border-right: 4px solid var(--mint-dark); }
        .history-withdraw { background: #ffe8e8; border-right: 4px solid var(--pink-dark); }
        .history-savings { background: #fff8e0; border-right: 4px solid var(--gold); }
        .history-bank { background: #e8e8f0; border-right: 4px solid #8080a0; }
        
        .history-text { font-size: 14px; }
        .history-amount { font-weight: bold; font-size: 18px; }
        .history-time { color: #888; font-size: 12px; }
        
        .no-history {
            text-align: center;
            color: #888;
            font-style: italic;
            padding: 20px;
        }
        
        /* Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 100;
            justify-content: center;
            align-items: center;
        }
        
        .modal {
            background: var(--white);
            border-radius: 25px;
            padding: 30px;
            max-width: 450px;
            width: 90%;
            border: 3px solid var(--gold);
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .modal-title {
            text-align: center;
            color: var(--gold);
            font-size: 24px;
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 5px;
            color: #555;
            font-weight: bold;
        }
        
        .form-input, .form-select {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            border: 2px solid var(--mint-dark);
            border-radius: 10px;
            background: white;
        }
        
        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: var(--gold);
        }
        
        .modal-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
        }
        
        .modal-btn {
            padding: 12px 30px;
            font-size: 16px;
            font-weight: bold;
            border: none;
            border-radius: 20px;
            cursor: pointer;
        }
        
        .modal-confirm { background: var(--mint); color: #2d5a40; border: 2px solid var(--mint-dark); }
        .modal-cancel { background: var(--pink); color: #8b4050; border: 2px solid var(--pink-dark); }
        
        .error-message {
            color: #c03030;
            text-align: center;
            margin-top: 10px;
            font-size: 14px;
        }
        
        .success-message {
            color: #308050;
            text-align: center;
            padding: 20px;
            font-size: 18px;
        }
        
        .bank-details-display {
            background: #f5f5f5;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            font-size: 14px;
        }
        
        .bank-details-display p {
            margin: 5px 0;
        }
        
        @keyframes deposit-animation {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .depositing { animation: deposit-animation 0.3s ease; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header-row">
            <div class="bsd">×‘×¡"×“</div>
            <div class="current-date" id="currentDate"></div>
        </div>
        <h1>ğŸ’° ×”××¨× ×§ ×©×œ×™ ğŸ’°</h1>
        
        <div class="wallet">
            <div class="balances-row">
                <div class="balance-box wallet-balance">
                    <div class="balance-label">ğŸ’µ ×‘××¨× ×§</div>
                    <div class="balance-amount" id="walletBalance">â‚ª0</div>
                </div>
                <div class="balance-box savings-balance">
                    <div class="balance-label">ğŸ· ×‘×—×™×¡×›×•×Ÿ</div>
                    <div class="balance-amount" id="savingsBalance">â‚ª0</div>
                </div>
                <div class="balance-box bank-balance">
                    <div class="balance-label">ğŸ¦ ×‘×‘× ×§</div>
                    <div class="balance-amount" id="bankBalance">â‚ª0</div>
                </div>
            </div>
            
            <div class="wallet-contents">
                <div class="wallet-contents-title">ğŸ’µ ××” ×™×© ×‘××¨× ×§:</div>
                <div class="money-in-wallet" id="walletContents">
                    <div class="empty-wallet">×”××¨× ×§ ×¨×™×§ ğŸ™</div>
                </div>
            </div>
            
            <div class="deposit-section">
                <div class="section-title">âœ¨ ×”×¤×§×“×ª ×›×¡×£</div>
                
                <div class="subsection-title">ğŸª™ ××˜×‘×¢×•×ª</div>
                <div class="money-buttons" style="margin-bottom: 15px;">
                    <button class="money-btn coin-btn" onclick="deposit(1)">â‚ª1</button>
                    <button class="money-btn coin-btn" onclick="deposit(2)">â‚ª2</button>
                    <button class="money-btn coin-btn" onclick="deposit(5)">â‚ª5</button>
                    <button class="money-btn coin-btn gold" onclick="deposit(10)">â‚ª10</button>
                </div>
                
                <div class="subsection-title">ğŸ’µ ×©×˜×¨×•×ª</div>
                <div class="money-buttons">
                    <button class="money-btn bill-btn-20" onclick="deposit(20)">â‚ª20</button>
                    <button class="money-btn bill-btn-50" onclick="deposit(50)">â‚ª50</button>
                    <button class="money-btn bill-btn-100" onclick="deposit(100)">â‚ª100</button>
                    <button class="money-btn bill-btn-200" onclick="deposit(200)">â‚ª200</button>
                </div>
            </div>
            
            <div class="actions">
                <button class="action-btn bank-btn" onclick="openBankModal()">ğŸ¦ ×”×¢×‘×¨×” ×œ×—×©×‘×•×Ÿ ×”×‘× ×§</button>
                <button class="action-btn savings-btn" onclick="openSavingsModal()">ğŸ· ×”×¢×‘×¨×” ×œ×—×™×¡×›×•×Ÿ</button>
                <button class="action-btn" style="background: #f0f0f0; color: #333; border: 2px solid #ccc;" onclick="printStatement()">ğŸ–¨ï¸ ×”×“×¤×¡×ª ×ª×“×¤×™×¡</button>
                <button class="action-btn" style="background: #25D366; color: white; border: 2px solid #128C7E;" onclick="shareStatement()">ğŸ“¤ ×©×™×ª×•×£</button>
            </div>
        </div>
        
        <div class="history-section">
            <div class="section-title">ğŸ“œ ×ª× ×•×¢×•×ª</div>
            <div id="history">
                <div class="no-history">××™×Ÿ ×¢×“×™×™×Ÿ ×¤×¢×•×œ×•×ª</div>
            </div>
        </div>
    </div>
    
    <!-- Bank Transfer Modal -->
    <div class="modal-overlay" id="bankModal">
        <div class="modal">
            <div class="modal-title">ğŸ¦ ×”×¢×‘×¨×” ×œ×—×©×‘×•×Ÿ ×”×‘× ×§</div>
            
            <div id="bankFormSection">
                <div class="form-group">
                    <label class="form-label">×¡×›×•× ×œ×”×¢×‘×¨×”:</label>
                    <input type="number" class="form-input" id="bankAmount" placeholder="×”×–×™× ×™ ×¡×›×•×" min="1">
                </div>
                
                <div class="form-group">
                    <label class="form-label">×‘×—×¨×™ ×‘× ×§:</label>
                    <select class="form-select" id="bankSelect" onchange="updateBranches()">
                        <option value="">-- ×‘×—×¨×™ ×‘× ×§ --</option>
                        <option value="12">×‘× ×§ ×”×¤×•×¢×œ×™× (12)</option>
                        <option value="10">×‘× ×§ ×œ××•××™ (10)</option>
                        <option value="11">×‘× ×§ ×“×™×¡×§×•× ×˜ (11)</option>
                        <option value="20">×‘× ×§ ××–×¨×—×™ ×˜×¤×—×•×ª (20)</option>
                        <option value="31">×‘× ×§ ×”×‘×™× ×œ××•××™ (31)</option>
                        <option value="14">×‘× ×§ ××•×¦×¨ ×”×—×™×™×œ (14)</option>
                        <option value="17">×‘× ×§ ××¨×›× ×ª×™×œ (17)</option>
                        <option value="04">×‘× ×§ ×™×”×‘ (04)</option>
                        <option value="09">×‘× ×§ ×”×“×•××¨ (09)</option>
                        <option value="46">×‘× ×§ ××¡×“ (46)</option>
                        <option value="54">×‘× ×§ ×™×¨×•×©×œ×™× (54)</option>
                        <option value="26">×™×•×‘× ×§ (26)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">×¡× ×™×£:</label>
                    <select class="form-select" id="branchSelect">
                        <option value="">-- ×‘×—×¨×™ ×¡× ×™×£ --</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">××¡×¤×¨ ×—×©×‘×•×Ÿ:</label>
                    <input type="text" class="form-input" id="accountNumber" placeholder="×”×–×™× ×™ ××¡×¤×¨ ×—×©×‘×•×Ÿ" maxlength="9">
                </div>
                
                <div class="form-group">
                    <label class="form-label">×©× ×‘×¢×œ/×ª ×”×—×©×‘×•×Ÿ:</label>
                    <input type="text" class="form-input" id="accountName" placeholder="×”×–×™× ×™ ×©×">
                </div>
                
                <div class="error-message" id="bankError"></div>
                
                <div class="modal-buttons">
                    <button class="modal-btn modal-confirm" onclick="confirmBankTransfer()">×‘×¦×¢×™ ×”×¢×‘×¨×”</button>
                    <button class="modal-btn modal-cancel" onclick="closeBankModal()">×‘×™×˜×•×œ</button>
                </div>
            </div>
            
            <div id="bankSuccessSection" style="display: none;">
                <div class="success-message">âœ… ×”×”×¢×‘×¨×” ×‘×•×¦×¢×” ×‘×”×¦×œ×—×”!</div>
                <div class="bank-details-display" id="transferDetails"></div>
                <div class="modal-buttons">
                    <button class="modal-btn modal-confirm" onclick="closeBankModal()">×¡×’×•×¨</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Savings Modal -->
    <div class="modal-overlay" id="savingsModal">
        <div class="modal">
            <div class="modal-title">ğŸ· ×”×¢×‘×¨×” ×œ×—×™×¡×›×•×Ÿ</div>
            <p style="text-align: center; color: #666; margin-bottom: 15px;">×”×¢×‘×¨×” ××—×©×‘×•×Ÿ ×”×‘× ×§ ×œ×—×™×¡×›×•×Ÿ</p>
            <div class="form-group">
                <label class="form-label">×¡×›×•× ×œ×”×¢×‘×¨×”:</label>
                <input type="number" class="form-input" id="savingsAmount" placeholder="×›××” ×œ×”×¢×‘×™×¨?" min="1">
            </div>
            <div class="error-message" id="savingsError"></div>
            <div class="modal-buttons">
                <button class="modal-btn modal-confirm" onclick="confirmSavings()">×”×¢×‘×™×¨×™ ×œ×—×™×¡×›×•×Ÿ</button>
                <button class="modal-btn modal-cancel" onclick="closeSavingsModal()">×‘×™×˜×•×œ</button>
            </div>
        </div>
    </div>
    
    <script>
        // === RESET FUNCTION FIRST - ×—×™×™×‘ ×œ×”×™×•×ª ×¨××©×•×Ÿ! ===
        var mizrahiLogo = 'data:image/jpeg;base64,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';
        
        function printStatement() {
            var now = new Date();
            var dateStr = now.toLocaleString('he-IL', { 
                timeZone: 'Asia/Jerusalem',
                day: '2-digit', 
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit', 
                minute: '2-digit'
            });
            
            var historyHtml = '';
            if (state.history && state.history.length > 0) {
                for (var i = 0; i < state.history.length; i++) {
                    var item = state.history[i];
                    historyHtml += '<tr>' +
                        '<td style="padding: 8px; border-bottom: 1px solid #eee;">' + item.time + '</td>' +
                        '<td style="padding: 8px; border-bottom: 1px solid #eee;">' + item.text + '</td>' +
                        '<td style="padding: 8px; border-bottom: 1px solid #eee; text-align: left;">â‚ª' + formatNumber(item.amount) + '</td>' +
                    '</tr>';
                }
            } else {
                historyHtml = '<tr><td colspan="3" style="padding: 20px; text-align: center; color: #888;">××™×Ÿ ×ª× ×•×¢×•×ª</td></tr>';
            }
            
            // ×™×¦×™×¨×ª div ×œ×”×“×¤×¡×”
            var printDiv = document.createElement('div');
            printDiv.id = 'printArea';
            printDiv.innerHTML = 
                '<div style="font-family: Arial, sans-serif; padding: 20px; max-width: 600px; margin: 0 auto; direction: rtl;">' +
                '<div style="text-align: center; margin-bottom: 20px;">' +
                    '<img src="' + mizrahiLogo + '" style="height: 50px; margin-bottom: 10px;"><br>' +
                    '<span style="color: #f60; font-weight: bold; font-size: 18px;">×‘× ×§ ××–×¨×—×™ ×˜×¤×—×•×ª</span>' +
                '</div>' +
                '<h2 style="text-align: center; color: #333; border-bottom: 2px solid #f60; padding-bottom: 10px;">×ª×“×¤×™×¡ ×ª× ×•×¢×•×ª ×—×©×‘×•×Ÿ</h2>' +
                '<div style="margin: 20px 0; padding: 15px; background: #f9f9f9; border-radius: 10px;">' +
                    '<p><strong>×ª××¨×™×š ×”×¤×§×”:</strong> ' + dateStr + '</p>' +
                    '<p><strong>×™×ª×¨×” ×‘××¨× ×§:</strong> â‚ª' + formatNumber(getWalletBalance()) + '</p>' +
                    '<p><strong>×™×ª×¨×” ×‘×—×™×¡×›×•×Ÿ:</strong> â‚ª' + formatNumber(state.savings) + '</p>' +
                    '<p><strong>×™×ª×¨×” ×‘×‘× ×§:</strong> â‚ª' + formatNumber(state.bank) + '</p>' +
                '</div>' +
                '<h3 style="color: #f60;">×ª× ×•×¢×•×ª ××—×¨×•× ×•×ª:</h3>' +
                '<table style="width: 100%; border-collapse: collapse;">' +
                    '<thead><tr style="background: #f60; color: white;">' +
                        '<th style="padding: 10px; text-align: right;">×ª××¨×™×š</th>' +
                        '<th style="padding: 10px; text-align: right;">×¤×¢×•×œ×”</th>' +
                        '<th style="padding: 10px; text-align: left;">×¡×›×•×</th>' +
                    '</tr></thead>' +
                    '<tbody>' + historyHtml + '</tbody>' +
                '</table>' +
                '<p style="text-align: center; margin-top: 30px; color: #888; font-size: 12px;">×ª×“×¤×™×¡ ×–×” ×”×•×¤×§ ×××¤×œ×™×§×¦×™×™×ª ×”××¨× ×§ ×”×“×™×’×™×˜×œ×™</p>' +
                '</div>';
            
            // ×”×¦×’×ª ×”×ª×“×¤×™×¡ ×‘××•×“××œ
            var modal = document.createElement('div');
            modal.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: white; z-index: 9999; overflow: auto; padding: 10px;';
            
            var closeBtn = document.createElement('button');
            closeBtn.textContent = 'âœ• ×¡×’×•×¨';
            closeBtn.style.cssText = 'position: fixed; top: 10px; left: 10px; padding: 10px 20px; background: #f60; color: white; border: none; border-radius: 10px; font-size: 16px; cursor: pointer; z-index: 10000;';
            closeBtn.onclick = function() { document.body.removeChild(modal); };
            
            modal.appendChild(closeBtn);
            modal.appendChild(printDiv);
            document.body.appendChild(modal);
            
            alert('×”×ª×“×¤×™×¡ ××•×¦×’! ×œ×©××™×¨×”: ×¦×™×œ×•× ××¡×š ××• ×©×™×ª×•×£ ğŸ“¸');
        }
        
        function shareStatement() {
            var now = new Date();
            var dateStr = now.toLocaleString('he-IL', { 
                timeZone: 'Asia/Jerusalem',
                day: '2-digit', 
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit', 
                minute: '2-digit'
            });
            
            var text = 'ğŸ“Š ×ª×“×¤×™×¡ ×—×©×‘×•×Ÿ - ×‘× ×§ ××–×¨×—×™ ×˜×¤×—×•×ª\n' +
                'ğŸ“… ' + dateStr + '\n\n' +
                'ğŸ’µ ×™×ª×¨×” ×‘××¨× ×§: â‚ª' + formatNumber(getWalletBalance()) + '\n' +
                'ğŸ· ×™×ª×¨×” ×‘×—×™×¡×›×•×Ÿ: â‚ª' + formatNumber(state.savings) + '\n' +
                'ğŸ¦ ×™×ª×¨×” ×‘×‘× ×§: â‚ª' + formatNumber(state.bank) + '\n\n' +
                'ğŸ“œ ×ª× ×•×¢×•×ª ××—×¨×•× ×•×ª:\n';
            
            if (state.history && state.history.length > 0) {
                var limit = Math.min(state.history.length, 10);
                for (var i = 0; i < limit; i++) {
                    var item = state.history[i];
                    text += 'â€¢ ' + item.text + ' - â‚ª' + formatNumber(item.amount) + ' (' + item.time + ')\n';
                }
            } else {
                text += '××™×Ÿ ×ª× ×•×¢×•×ª';
            }
            
            if (navigator.share) {
                navigator.share({
                    title: '×ª×“×¤×™×¡ ×—×©×‘×•×Ÿ',
                    text: text
                }).catch(function(err) {
                    console.log('Share error:', err);
                    copyToClipboard(text);
                });
            } else {
                copyToClipboard(text);
            }
        }
        
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(function() {
                alert('×”×ª×“×¤×™×¡ ×”×•×¢×ª×§! × ×™×ª×Ÿ ×œ×”×“×‘×™×§ ×‘×•×•××˜×¡××¤ ××• ×‘×›×œ ××§×•× ××—×¨');
            }).catch(function() {
                alert('×œ× × ×™×ª×Ÿ ×œ×”×¢×ª×™×§. × ×¡×™ ×©×•×‘.');
            });
        }
        
        // × ×ª×•× ×™ ×¡× ×™×¤×™× ×œ×›×œ ×‘× ×§
        var branchesData = {
            '12': [ // ×¤×•×¢×œ×™×
                {num: '600', name: '×¡× ×™×£ ×¨××©×™ ×ª×œ ××‘×™×‘'},
                {num: '532', name: '×“×™×–× ×’×•×£ ×ª×œ ××‘×™×‘'},
                {num: '617', name: '×¨××ª ×’×Ÿ'},
                {num: '690', name: '×—×™×¤×” ××¨×›×–'},
                {num: '782', name: '×™×¨×•×©×œ×™× ××¨×›×–'},
                {num: '654', name: '×‘××¨ ×©×‘×¢'},
                {num: '718', name: '× ×ª× ×™×”'},
                {num: '567', name: '×¤×ª×— ×ª×§×•×•×”'},
                {num: '623', name: '×¨××©×•×Ÿ ×œ×¦×™×•×Ÿ'},
                {num: '701', name: '××©×“×•×“'}
            ],
            '10': [ // ×œ××•××™
                {num: '800', name: '×¡× ×™×£ ×¨××©×™ ×œ×•×“'},
                {num: '815', name: '×¨×•×˜×©×™×œ×“ ×ª×œ ××‘×™×‘'},
                {num: '862', name: '×¨××ª ×’×Ÿ'},
                {num: '901', name: '×—×™×¤×”'},
                {num: '850', name: '×™×¨×•×©×œ×™×'},
                {num: '910', name: '×‘××¨ ×©×‘×¢'},
                {num: '870', name: '× ×ª× ×™×”'},
                {num: '835', name: '×¤×ª×— ×ª×§×•×•×”'},
                {num: '842', name: '×¨××©×•×Ÿ ×œ×¦×™×•×Ÿ'},
                {num: '920', name: '××©×“×•×“'}
            ],
            '11': [ // ×“×™×¡×§×•× ×˜
                {num: '001', name: '×¡× ×™×£ ×¨××©×™ ×ª×œ ××‘×™×‘'},
                {num: '019', name: '××œ× ×‘×™ ×ª×œ ××‘×™×‘'},
                {num: '052', name: '×¨××ª ×’×Ÿ'},
                {num: '071', name: '×—×™×¤×”'},
                {num: '091', name: '×™×¨×•×©×œ×™×'},
                {num: '084', name: '×‘××¨ ×©×‘×¢'},
                {num: '067', name: '× ×ª× ×™×”'},
                {num: '048', name: '×¤×ª×— ×ª×§×•×•×”'},
                {num: '055', name: '×¨××©×•×Ÿ ×œ×¦×™×•×Ÿ'},
                {num: '088', name: '××©×“×•×“'}
            ],
            '20': [ // ××–×¨×—×™ ×˜×¤×—×•×ª
                {num: '416', name: '××©×“×•×“'},
                {num: '565', name: '××©×“×•×“ ×¡×™×˜×™'},
                {num: '615', name: '×.×ª. ××©×“×•×“'},
                {num: '409', name: '××¨×›×– ×¢×¡×§×™× ×ª×œ ××‘×™×‘'},
                {num: '469', name: '××œ× ×‘×™ ×ª×œ ××‘×™×‘'},
                {num: '453', name: '×œ×‘ ×“×™×–× ×’×•×£'},
                {num: '413', name: '×¨××ª ×’×Ÿ'},
                {num: '477', name: '×”××’×“×œ ×¨××ª ×’×Ÿ'},
                {num: '441', name: '×—×™×¤×” ×”×“×¨'},
                {num: '444', name: '××¨×›×– ×¢×¡×§×™× ×—×™×¤×”'},
                {num: '449', name: '×›×¨××œ ×—×™×¤×”'},
                {num: '401', name: '×§×¨×™×ª ×”×¢×¡×§×™× ×™×¨×•×©×œ×™×'},
                {num: '417', name: '××œ×›×™ ×™×©×¨××œ ×™×¨×•×©×œ×™×'},
                {num: '563', name: '×¨××•×ª ×™×¨×•×©×œ×™×'},
                {num: '426', name: '××¨×›×– ×¢×¡×§×™× ×‘××¨ ×©×‘×¢'},
                {num: '566', name: '××¦×“×” ×‘××¨ ×©×‘×¢'},
                {num: '452', name: '×§× ×™×•×Ÿ ×”×©×¨×•×Ÿ × ×ª× ×™×”'},
                {num: '465', name: '×œ×‘ ×”×¢×™×¨ ×¤×ª×— ×ª×§×•×•×”'},
                {num: '435', name: '×¨××©×•×Ÿ ×œ×¦×™×•×Ÿ'},
                {num: '427', name: '××©×§×œ×•×Ÿ'},
                {num: '521', name: '××•×“×™×¢×™×Ÿ'},
                {num: '415', name: '×”×¨×¦×œ×™×”'},
                {num: '468', name: '×—×–×•×Ÿ ××™×© ×‘× ×™ ×‘×¨×§'},
                {num: '434', name: '×¨×—×•×‘×•×ª'},
                {num: '470', name: '××™×œ×ª'}
            ],
            '31': [ // ×”×‘×™× ×œ××•××™
                {num: '001', name: '×¡× ×™×£ ×¨××©×™ ×ª×œ ××‘×™×‘'},
                {num: '035', name: '×¨××ª ×’×Ÿ'},
                {num: '050', name: '×—×™×¤×”'},
                {num: '070', name: '×™×¨×•×©×œ×™×'},
                {num: '025', name: '× ×ª× ×™×”'},
                {num: '040', name: '×¨××©×•×Ÿ ×œ×¦×™×•×Ÿ'}
            ],
            '14': [ // ××•×¦×¨ ×”×—×™×™×œ
                {num: '101', name: '×¡× ×™×£ ×¨××©×™ ×ª×œ ××‘×™×‘'},
                {num: '120', name: '×—×™×¤×”'},
                {num: '130', name: '×™×¨×•×©×œ×™×'},
                {num: '115', name: '×‘××¨ ×©×‘×¢'},
                {num: '140', name: '× ×ª× ×™×”'}
            ],
            '17': [ // ××¨×›× ×ª×™×œ
                {num: '001', name: '×¡× ×™×£ ×¨××©×™ ×ª×œ ××‘×™×‘'},
                {num: '014', name: '×¨××ª ×’×Ÿ'},
                {num: '031', name: '×—×™×¤×”'},
                {num: '045', name: '×™×¨×•×©×œ×™×'}
            ],
            '04': [ // ×™×”×‘
                {num: '001', name: '×¡× ×™×£ ×¨××©×™ ×™×¨×•×©×œ×™×'},
                {num: '010', name: '×ª×œ ××‘×™×‘'},
                {num: '020', name: '×—×™×¤×”'},
                {num: '030', name: '×‘××¨ ×©×‘×¢'}
            ],
            '09': [ // ×”×“×•××¨
                {num: '001', name: '×¡× ×™×£ ×¨××©×™'},
                {num: '100', name: '×ª×œ ××‘×™×‘ ××¨×›×–'},
                {num: '200', name: '×™×¨×•×©×œ×™×'},
                {num: '300', name: '×—×™×¤×”'}
            ],
            '46': [ // ××¡×“
                {num: '001', name: '×¡× ×™×£ ×¨××©×™ ×ª×œ ××‘×™×‘'},
                {num: '005', name: '×™×¨×•×©×œ×™×'},
                {num: '010', name: '×—×™×¤×”'}
            ],
            '54': [ // ×™×¨×•×©×œ×™×
                {num: '001', name: '×¡× ×™×£ ×¨××©×™ ×™×¨×•×©×œ×™×'},
                {num: '010', name: '×ª×œ ××‘×™×‘'},
                {num: '020', name: '×‘× ×™ ×‘×¨×§'}
            ],
            '26': [ // ×™×•×‘× ×§
                {num: '001', name: '×¡× ×™×£ ×¨××©×™'},
                {num: '010', name: '×ª×œ ××‘×™×‘'}
            ]
        };
        
        // SVG ××˜×‘×¢×•×ª
        const coinSVGs = {
            1: `<svg width="50" height="50" viewBox="0 0 100 100">
                <defs><radialGradient id="c1g" cx="30%" cy="30%"><stop offset="0%" style="stop-color:#f0f0f0"/><stop offset="100%" style="stop-color:#a0a0a0"/></radialGradient></defs>
                <circle cx="50" cy="50" r="46" fill="url(#c1g)" stroke="#707070" stroke-width="4"/>
                <circle cx="50" cy="50" r="38" fill="none" stroke="#888" stroke-width="1"/>
                <text x="50" y="45" text-anchor="middle" font-size="18" font-weight="bold" fill="#404040">â‚ª1</text>
                <text x="50" y="62" text-anchor="middle" font-size="10" fill="#555">×©×§×œ</text>
            </svg>`,
            2: `<svg width="55" height="55" viewBox="0 0 100 100">
                <defs><radialGradient id="c2g" cx="30%" cy="30%"><stop offset="0%" style="stop-color:#e8e8e8"/><stop offset="100%" style="stop-color:#909090"/></radialGradient></defs>
                <circle cx="50" cy="50" r="46" fill="url(#c2g)" stroke="#606060" stroke-width="4"/>
                <circle cx="50" cy="50" r="38" fill="none" stroke="#777" stroke-width="1"/>
                <text x="50" y="45" text-anchor="middle" font-size="18" font-weight="bold" fill="#353535">â‚ª2</text>
                <text x="50" y="62" text-anchor="middle" font-size="9" fill="#454545">×©×§×œ×™×</text>
            </svg>`,
            5: `<svg width="60" height="60" viewBox="0 0 100 100">
                <defs><radialGradient id="c5g" cx="30%" cy="30%"><stop offset="0%" style="stop-color:#e0e0e0"/><stop offset="100%" style="stop-color:#888888"/></radialGradient></defs>
                <circle cx="50" cy="50" r="46" fill="url(#c5g)" stroke="#505050" stroke-width="4"/>
                <circle cx="50" cy="50" r="38" fill="none" stroke="#666" stroke-width="1"/>
                <text x="50" y="45" text-anchor="middle" font-size="18" font-weight="bold" fill="#303030">â‚ª5</text>
                <text x="50" y="62" text-anchor="middle" font-size="9" fill="#404040">×©×§×œ×™×</text>
            </svg>`,
            10: `<svg width="65" height="65" viewBox="0 0 100 100">
                <defs>
                    <radialGradient id="c10o" cx="30%" cy="30%"><stop offset="0%" style="stop-color:#d8d8d8"/><stop offset="100%" style="stop-color:#909090"/></radialGradient>
                    <radialGradient id="c10i" cx="30%" cy="30%"><stop offset="0%" style="stop-color:#ffe070"/><stop offset="100%" style="stop-color:#c09020"/></radialGradient>
                </defs>
                <circle cx="50" cy="50" r="46" fill="url(#c10o)" stroke="#606060" stroke-width="4"/>
                <circle cx="50" cy="50" r="30" fill="url(#c10i)" stroke="#a08020" stroke-width="2"/>
                <text x="50" y="45" text-anchor="middle" font-size="14" font-weight="bold" fill="#5a4010">â‚ª10</text>
                <text x="50" y="58" text-anchor="middle" font-size="8" fill="#6a5020">×©×§×œ×™×</text>
            </svg>`
        };
        
        // SVG ×©×˜×¨×•×ª
        const billSVGs = {
            20: `<svg width="90" height="50" viewBox="0 0 180 100">
                <defs><linearGradient id="b20" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#e05050"/><stop offset="100%" style="stop-color:#a02020"/></linearGradient></defs>
                <rect x="2" y="2" width="176" height="96" rx="6" fill="url(#b20)" stroke="#801515" stroke-width="3"/>
                <rect x="8" y="8" width="164" height="84" rx="4" fill="none" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                <text x="90" y="45" text-anchor="middle" font-size="28" font-weight="bold" fill="#fff">â‚ª20</text>
                <text x="90" y="70" text-anchor="middle" font-size="12" fill="#ffd0d0">×¨×—×œ ×”××©×•×¨×¨×ª</text>
            </svg>`,
            50: `<svg width="90" height="50" viewBox="0 0 180 100">
                <defs><linearGradient id="b50" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#40a060"/><stop offset="100%" style="stop-color:#206040"/></linearGradient></defs>
                <rect x="2" y="2" width="176" height="96" rx="6" fill="url(#b50)" stroke="#104030" stroke-width="3"/>
                <rect x="8" y="8" width="164" height="84" rx="4" fill="none" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                <text x="90" y="45" text-anchor="middle" font-size="28" font-weight="bold" fill="#fff">â‚ª50</text>
                <text x="90" y="70" text-anchor="middle" font-size="11" fill="#c0ffc0">×˜×©×¨× ×™×—×•×‘×¡×§×™</text>
            </svg>`,
            100: `<svg width="90" height="50" viewBox="0 0 180 100">
                <defs><linearGradient id="b100" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#e09030"/><stop offset="100%" style="stop-color:#a05810"/></linearGradient></defs>
                <rect x="2" y="2" width="176" height="96" rx="6" fill="url(#b100)" stroke="#704010" stroke-width="3"/>
                <rect x="8" y="8" width="164" height="84" rx="4" fill="none" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                <text x="90" y="45" text-anchor="middle" font-size="26" font-weight="bold" fill="#fff">â‚ª100</text>
                <text x="90" y="70" text-anchor="middle" font-size="12" fill="#ffe0c0">×œ××” ×’×•×œ×“×‘×¨×’</text>
            </svg>`,
            200: `<svg width="90" height="50" viewBox="0 0 180 100">
                <defs><linearGradient id="b200" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#4080c0"/><stop offset="100%" style="stop-color:#204580"/></linearGradient></defs>
                <rect x="2" y="2" width="176" height="96" rx="6" fill="url(#b200)" stroke="#102550" stroke-width="3"/>
                <rect x="8" y="8" width="164" height="84" rx="4" fill="none" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>
                <text x="90" y="45" text-anchor="middle" font-size="26" font-weight="bold" fill="#fff">â‚ª200</text>
                <text x="90" y="70" text-anchor="middle" font-size="12" fill="#c0e0ff">× ×ª×Ÿ ××œ×ª×¨××Ÿ</text>
            </svg>`
        };
        
        // ××¦×‘
        let state = {
            wallet: { 1: 0, 2: 0, 5: 0, 10: 0, 20: 0, 50: 0, 100: 0, 200: 0 },
            savings: 0,
            bank: 0,
            bankAccount: null,
            history: [],
            deposits: []
        };
        
        function loadState() {
            const saved = localStorage.getItem('myDigitalWallet');
            if (saved) {
                state = JSON.parse(saved);
            }
            updateDisplay();
        }
        
        function saveState() {
            localStorage.setItem('myDigitalWallet', JSON.stringify(state));
        }
        
        function getWalletBalance() {
            var total = 0;
            for (var denom in state.wallet) {
                total += parseInt(denom) * state.wallet[denom];
            }
            return total;
        }
        
        function formatNumber(num) {
            return num.toLocaleString('he-IL');
        }
        
        function autoSizeBalance(el) {
            var text = el.textContent;
            if (text.length > 10) {
                el.style.fontSize = '14px';
            } else if (text.length > 7) {
                el.style.fontSize = '17px';
            } else if (text.length > 5) {
                el.style.fontSize = '20px';
            } else {
                el.style.fontSize = '24px';
            }
        }
        
        function deposit(amount) {
            state.wallet[amount]++;
            var now = new Date();
            var timeStr = now.toLocaleString('he-IL', { timeZone: 'Asia/Jerusalem', 
                day: '2-digit', 
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit', 
                minute: '2-digit',
                second: '2-digit'
            });
            if (!state.deposits) state.deposits = [];
            state.deposits.push({ amount: amount, time: timeStr });
            addHistory('deposit', amount, '×”×¤×§×“×ª â‚ª' + amount);
            saveState();
            updateDisplay();
            
            document.getElementById('walletBalance').classList.add('depositing');
            setTimeout(function() { document.getElementById('walletBalance').classList.remove('depositing'); }, 300);
        }
        
        function updateDisplay() {
            document.getElementById('walletBalance').textContent = 'â‚ª' + formatNumber(getWalletBalance());
            document.getElementById('savingsBalance').textContent = 'â‚ª' + formatNumber(state.savings);
            document.getElementById('bankBalance').textContent = 'â‚ª' + formatNumber(state.bank);
            
            autoSizeBalance(document.getElementById('walletBalance'));
            autoSizeBalance(document.getElementById('savingsBalance'));
            autoSizeBalance(document.getElementById('bankBalance'));
            
            // ×¢×“×›×•×Ÿ ×ª×•×›×Ÿ ×”××¨× ×§ - ×ª×¦×•×’×” ××§×•×‘×¦×ª
            var contentsEl = document.getElementById('walletContents');
            var html = '';
            
            var denominations = [1, 2, 5, 10, 20, 50, 100, 200];
            
            for (var i = 0; i < denominations.length; i++) {
                var denom = denominations[i];
                if (state.wallet[denom] > 0) {
                    var svg = denom <= 10 ? coinSVGs[denom] : billSVGs[denom];
                    html += '<div class="money-item">' +
                        svg +
                        '<span class="money-count">x' + state.wallet[denom] + '</span>' +
                    '</div>';
                }
            }
            
            if (html === '') {
                html = '<div class="empty-wallet">×”××¨× ×§ ×¨×™×§ ğŸ™</div>';
            }
            
            contentsEl.innerHTML = html;
            updateHistory();
        }
        
        function addHistory(type, amount, text) {
            const now = new Date();
            const timeStr = now.toLocaleString('he-IL', { timeZone: 'Asia/Jerusalem', 
                day: '2-digit', 
                month: '2-digit',
                hour: '2-digit', 
                minute: '2-digit' 
            });
            state.history.unshift({ type, amount, text, time: timeStr });
            if (state.history.length > 30) state.history.pop();
        }
        
        function updateHistory() {
            const historyEl = document.getElementById('history');
            
            if (state.history.length === 0) {
                historyEl.innerHTML = '<div class="no-history">××™×Ÿ ×¢×“×™×™×Ÿ ×¤×¢×•×œ×•×ª</div>';
                return;
            }
            
            let html = '';
            state.history.forEach(item => {
                let className = 'history-deposit';
                if (item.type === 'withdraw' || item.type === 'bank') className = 'history-bank';
                if (item.type === 'savings') className = 'history-savings';
                
                html += `<div class="history-item ${className}">
                    <div>
                        <div class="history-text">${item.text}</div>
                        <div class="history-time">${item.time}</div>
                    </div>
                    <span class="history-amount">â‚ª${item.amount}</span>
                </div>`;
            });
            
            historyEl.innerHTML = html;
        }
        
        function updateBranches() {
            const bankCode = document.getElementById('bankSelect').value;
            const branchSelect = document.getElementById('branchSelect');
            
            branchSelect.innerHTML = '<option value="">-- ×‘×—×¨×™ ×¡× ×™×£ --</option>';
            
            if (bankCode && branchesData[bankCode]) {
                branchesData[bankCode].forEach(branch => {
                    const option = document.createElement('option');
                    option.value = branch.num;
                    option.textContent = `${branch.num} - ${branch.name}`;
                    branchSelect.appendChild(option);
                });
            }
        }
        
        function openBankModal() {
            document.getElementById('bankModal').style.display = 'flex';
            document.getElementById('bankFormSection').style.display = 'block';
            document.getElementById('bankSuccessSection').style.display = 'none';
            document.getElementById('bankError').textContent = '';
            document.getElementById('bankAmount').value = '';
        }
        
        function closeBankModal() {
            document.getElementById('bankModal').style.display = 'none';
        }
        
        function confirmBankTransfer() {
            const amount = parseInt(document.getElementById('bankAmount').value);
            const bankSelect = document.getElementById('bankSelect');
            const branchSelect = document.getElementById('branchSelect');
            const accountNumber = document.getElementById('accountNumber').value;
            const accountName = document.getElementById('accountName').value;
            
            const balance = getWalletBalance();
            
            if (!amount || amount <= 0) {
                document.getElementById('bankError').textContent = '× × ×œ×”×–×™×Ÿ ×¡×›×•× ×ª×§×™×Ÿ';
                return;
            }
            if (amount > balance) {
                document.getElementById('bankError').textContent = '××™×Ÿ ××¡×¤×™×§ ×›×¡×£ ×‘××¨× ×§!';
                return;
            }
            if (!bankSelect.value) {
                document.getElementById('bankError').textContent = '× × ×œ×‘×—×•×¨ ×‘× ×§';
                return;
            }
            if (!branchSelect.value) {
                document.getElementById('bankError').textContent = '× × ×œ×‘×—×•×¨ ×¡× ×™×£';
                return;
            }
            if (!accountNumber || accountNumber.length < 4) {
                document.getElementById('bankError').textContent = '× × ×œ×”×–×™×Ÿ ××¡×¤×¨ ×—×©×‘×•×Ÿ ×ª×§×™×Ÿ';
                return;
            }
            if (!accountName) {
                document.getElementById('bankError').textContent = '× × ×œ×”×–×™×Ÿ ×©× ×‘×¢×œ/×ª ×”×—×©×‘×•×Ÿ';
                return;
            }
            
            // ×‘×™×¦×•×¢ ×”×”×¢×‘×¨×”
            let remaining = amount;
            const denominations = [200, 100, 50, 20, 10, 5, 2, 1];
            
            for (let denom of denominations) {
                while (remaining >= denom && state.wallet[denom] > 0) {
                    state.wallet[denom]--;
                    remaining -= denom;
                }
            }
            
            state.bank += amount;
            state.bankAccount = {
                bankName: bankSelect.options[bankSelect.selectedIndex].text,
                bankCode: bankSelect.value,
                branch: branchSelect.value,
                branchName: branchSelect.options[branchSelect.selectedIndex].text,
                account: accountNumber,
                name: accountName
            };
            
            addHistory('bank', amount, `×”×¢×‘×¨×” ×œ×‘× ×§ - ${state.bankAccount.bankName.split(' (')[0]}`);
            saveState();
            updateDisplay();
            
            // ×”×¦×’×ª ×”×¦×œ×—×”
            var now = new Date();
            var dateStr = now.toLocaleString('he-IL', { timeZone: 'Asia/Jerusalem', 
                day: '2-digit', 
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit', 
                minute: '2-digit',
                second: '2-digit'
            });
            document.getElementById('bankFormSection').style.display = 'none';
            document.getElementById('bankSuccessSection').style.display = 'block';
            document.getElementById('transferDetails').innerHTML = 
                '<p><strong>×ª××¨×™×š ×•×©×¢×”:</strong> ' + dateStr + '</p>' +
                '<p><strong>×¡×›×•×:</strong> â‚ª' + amount + '</p>' +
                '<p><strong>×‘× ×§:</strong> ' + state.bankAccount.bankName + '</p>' +
                '<p><strong>×¡× ×™×£:</strong> ' + state.bankAccount.branchName + '</p>' +
                '<p><strong>××¡×¤×¨ ×—×©×‘×•×Ÿ:</strong> ' + accountNumber + '</p>' +
                '<p><strong>×©×:</strong> ' + accountName + '</p>' +
                '<p style="margin-top:10px; color: var(--gold); font-weight:bold;">âœ… ×”×”×¢×‘×¨×” ×‘×•×¦×¢×” ×‘×”×¦×œ×—×”</p>';
        }
        
        function openSavingsModal() {
            document.getElementById('savingsModal').style.display = 'flex';
            document.getElementById('savingsError').textContent = '';
            document.getElementById('savingsAmount').value = '';
        }
        
        function closeSavingsModal() {
            document.getElementById('savingsModal').style.display = 'none';
        }
        
        function confirmSavings() {
            var amount = parseInt(document.getElementById('savingsAmount').value);
            
            if (!amount || amount <= 0) {
                document.getElementById('savingsError').textContent = '× × ×œ×”×–×™×Ÿ ×¡×›×•× ×ª×§×™×Ÿ';
                return;
            }
            if (amount > state.bank) {
                document.getElementById('savingsError').textContent = '××™×Ÿ ××¡×¤×™×§ ×›×¡×£ ×‘×—×©×‘×•×Ÿ ×”×‘× ×§!';
                return;
            }
            
            state.bank -= amount;
            state.savings += amount;
            addHistory('savings', amount, '×”×¢×‘×¨×” ××”×‘× ×§ ×œ×—×™×¡×›×•×Ÿ ğŸ·');
            saveState();
            updateDisplay();
            
            var now = new Date();
            var dateStr = now.toLocaleString('he-IL', { timeZone: 'Asia/Jerusalem', 
                day: '2-digit', 
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit', 
                minute: '2-digit',
                second: '2-digit'
            });
            alert('âœ… ×”×•×¢×‘×¨ ×œ×—×™×¡×›×•×Ÿ ×‘×”×¦×œ×—×”!\n\n×¡×›×•×: â‚ª' + amount + '\n×ª××¨×™×š: ' + dateStr);
            closeSavingsModal();
        }
        
        // ×¡×’×™×¨×ª ××•×“××œ ×‘×œ×—×™×¦×” ×‘×—×•×¥
        document.getElementById('bankModal').addEventListener('click', function(e) {
            if (e.target === this) closeBankModal();
        });
        document.getElementById('savingsModal').addEventListener('click', function(e) {
            if (e.target === this) closeSavingsModal();
        });
        
        // ×˜×¢×™× ×”
        // ×”×¦×’×ª ×ª××¨×™×š × ×•×›×—×™
        function updateCurrentDate() {
            var now = new Date();
            var dateStr = now.toLocaleDateString('he-IL', { 
                timeZone: 'Asia/Jerusalem',
                weekday: 'long',
                day: 'numeric', 
                month: 'long',
                year: 'numeric'
            });
            document.getElementById('currentDate').textContent = dateStr;
        }
        
        updateCurrentDate();
        loadState();
    </script>
</body>
</html>
